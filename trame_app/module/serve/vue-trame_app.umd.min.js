(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["trame_app"]=t():e["trame_app"]=t()})("undefined"!==typeof self?self:this,(function(){return function(){"use strict";var e={};!function(){e.d=function(t,o){for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})}}(),function(){e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){e.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){e.p=""}();var t={};if(e.r(t),e.d(t,{install:function(){return $}}),"undefined"!==typeof window){var o=window.document.currentScript,r=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(e.p=r[1])}var n=function(){var e=this,t=e._self._c;return t("div",{class:e.dark?"widget-container dark":"widget-container"},[t("canvas",{ref:"histogram",staticClass:"histogram-canvas"}),t("div",{ref:"histogramLabels",staticClass:"histogram-labels"}),t("div",{ref:"colorLine",class:e.dark?"color-line dark":"color-line"},[t("canvas",{ref:"gradientBox",staticClass:"gradient-box"}),e._l(e.colorNodes,(function(o){return t("color-node",{key:o[0],attrs:{scalarValue:o[0],rgbValue:o.slice(1),histogramData:e.histogramData,colorLine:e.colorLine,fullRange:e.fullRange,dark:e.dark}})}))],2),t("v-btn",{staticClass:"update-btn",on:{click:e.update}},[e._v("Update")])],1)},i=[],a=function(){var e=this,t=e._self._c;return e.colorLine?t("div",{class:e.dark?"color-square dark":"color-square",style:`left: ${e.xPosition}px; background-color: ${e.rgbString}`}):e._e()},s=[];const l=2;function c(e,t,o){return Math.min(Math.max(e,t),o)}function d(e,t,o,r=!1){const n=t.getContext("2d");if(!n)return;r&&(n.fillStyle="white");const{width:i,height:a}=t;o.innerHTML="";const s=e.counts.length,c=i/s,d=Math.max(...e.counts);e.counts.forEach(((e,t)=>{const o=a*(e/d),r=t*c,i=a-o;n.beginPath(),n.rect(r+l,i,c-l,o),n.fill()}));const u=e.range;u.forEach((e=>{const t=document.createElement("p");t.innerHTML=`${e}`,t.style.width=`${c}px`,t.style.textAlign="center",o.appendChild(t)}))}function u(e,t,o){const r=t.getContext("2d");if(!r)return;const{width:n,height:i}=t,a=r.createLinearGradient(0,0,n,0);e.forEach((e=>{const t=c(e[0],o[0],o[1]),r=(t-o[0])/(o[1]-o[0]),n=e.slice(1).map((e=>255*e));a.addColorStop(r,`rgb(${n[0]}, ${n[1]}, ${n[2]})`)})),a.addColorStop(1,"white"),r.fillStyle=a,r.fillRect(0,0,n,i)}var f={props:{scalarValue:{type:Number,required:!0},rgbValue:{type:Array,required:!0},histogramData:{type:Object,required:!0},colorLine:{required:!0},fullRange:{type:Array,required:!0},dark:{type:Boolean,required:!1,default:!1}},data(){return{xPosition:0}},computed:{rgbString(){const e=this.rgbValue.map((e=>255*e));return`rgb(${e[0]}, ${e[1]}, ${e[2]})`}},methods:{updateXPosition(){if(!this.colorLine)return;const e=c(this.scalarValue,this.fullRange[0],this.fullRange[1]),t=this.colorLine.clientWidth,o=t-10,r=t*((e-this.fullRange[0])/(this.fullRange[1]-this.fullRange[0]))-7;this.xPosition=r<o?r:o}},mounted(){this.updateXPosition()},updated(){this.updateXPosition()}},h=f;function p(e,t,o,r,n,i,a,s){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=o,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):n&&(l=s?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}var g=p(h,a,s,!1,null,"f7d5ae32",null),m=g.exports,y={components:{ColorNode:m},props:{value:{type:Array,required:!0},histogramData:{type:Object,required:!0},dark:{type:Boolean,required:!1,default:!1}},computed:{fullRange(){return this.histogramData.range}},data(){return{colorLine:void 0,colorNodes:this.value}},methods:{render(){this.colorLine=this.$refs.colorLine,d(this.histogramData,this.$refs.histogram,this.$refs.histogramLabels,this.dark),u(this.colorNodes,this.$refs.gradientBox,this.fullRange)},update(){this.colorNodes=[[-3e3,0,0,0],[0,1,0,1],[1e3,1,0,0],[4e3,0,1,0]],this.$emit("input",this.colorNodes)}},mounted(){this.render()},updated(){this.render()}},b=y,v=p(b,n,i,!1,null,"22bc6547",null),_=v.exports,x={ColormapEditor:_,ColorNode:m};function $(e){Object.keys(x).forEach((t=>{e.component(t,x[t])}))}return t}()}));
//# sourceMappingURL=vue-trame_app.umd.min.js.map